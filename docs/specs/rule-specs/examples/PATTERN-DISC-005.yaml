schema_version: 1

rule:
  id: "PATTERN-DISC-005"
  title: "Builder Pattern"
  description: |
    Discovers usage of the Builder pattern where classes provide a fluent interface for
    constructing complex objects step by step, ending with a build() method.
  rationale: |
    Builder pattern separates construction from representation, allowing the same construction
    process to create different representations. Provides a clear, readable way to build complex objects.
  tier: 1
  category: "creational"
  severity: "info"
  languages: [python]

  check:
    type: "pattern_discovery"
    patterns:
      - |
        class $BUILDER:
          ...
          def $METHOD(self, ...):
            ...
            return self
          ...
          def build(self):
            return $RESULT

  reporting:
    default_message: "Builder pattern detected. Class provides fluent interface for constructing complex objects."
    confidence: "high"
    documentation_url: null

  examples:
    good:
      - language: python
        code: |
          class QueryBuilder:
              def __init__(self):
                  self._filters = []

              def where(self, field, value):
                  self._filters.append((field, value))
                  return self

              def build(self):
                  return Query(self._filters)
    bad: []

  references:
    - "https://refactoring.guru/design-patterns/builder"
