schema_version: 1

rule:
  id: "PATTERN-DISC-015"
  title: "Custom Exception Hierarchy Pattern"
  description: |
    Discovers usage of custom exception hierarchies where a base exception class
    serves as the parent for domain-specific error types.
  rationale: |
    Custom exception hierarchies enable fine-grained error handling and provide
    clear domain semantics. Allows catching related errors with a single except clause.
  tier: 1
  category: "error-handling"
  severity: "info"
  languages: [python]

  check:
    type: "pattern_discovery"
    patterns:
      - |
        class $BASE(Exception):
          ...

        class $DERIVED($BASE):
          ...

  reporting:
    default_message: "Custom exception hierarchy pattern detected. Base exception class for domain-specific errors."
    confidence: "high"
    documentation_url: null

  examples:
    good:
      - language: python
        code: |
          class LingError(Exception):
              """Base exception for all ling errors."""
              pass

          class ConfigurationError(LingError):
              """Invalid configuration."""
              pass
    bad: []

  references:
    - "https://docs.python.org/3/tutorial/errors.html#user-defined-exceptions"
